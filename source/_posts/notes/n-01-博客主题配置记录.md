---
title: 博客配置记录
tags:
  - Hexo
  - 博客搭建
categories:
  - 笔记
  - 博客搭建
date: 2023-06-12 00:16:55
---


本文主要记录了这个博客是如何部署的，以及一些主题和插件的配置情况。

<!-- more -->

虽说只是博客重启，倒也并非随便改改这么简单。从工作量上比较，和新开一个貌似没什么区别（受不了一点）。光是升级版本，就会发现Hexo、NexT主题与Node版本各种不对付，各个版本都有自己的想法。本来想着维持原状，在多次尝试后终于还是找到了能正常运作的组合，过程好不费劲。

## 版本说明

- Hexo：6.3.0
- NexT主题：8.14.2
- Node版本：15.14.0

框架使用Hexo，这个就不用多说了，快速生成前端静态网站的博客框架，支持本地调试、一键部署等功能；据说这个框架在文章多起来后编译效率有问题，但是对我来说目前还没有影响（毕竟懒人），用它也是图用的人多、社区生态好罢了。

主题使用NexT，也是一个烂大街的主题了，各种教你配置的文章满地都是，但是说实话没有几篇是有用的，绝大多数情况下直接去找官方文档可能更省事。所以本文仅供参考，不保证有多少价值。

## 部分配置指南

### 配置多个layout为index的页面

标题有点不好理解，说白了就是让菜单的其它页面的布局和首页一样。

举个栗子：

- 首页，我要展示所有的文章，布局就是NexT的默认布局；
- 生活和笔记两个菜单，我也想按首页的布局去展现，同时分别展示对应分类下的文章。

Hexo默认是使用 `hexo-generator-index` 这个插件，我们需要替换为第三方的 `hexo-generator-index2`，同时删除原来插件。这个插件支持展示（过滤）特定 分类/标签/路径 下的文章

除此之外，还可以不在菜单中展示的情况下，配置 tags，archives 等页面

配置部分可以直接看[文档](https://github.com/Jamling/hexo-generator-index2/blob/master/README_zh.md)，写的很详细了

### 调整站点字体

调整字体，有时候需要引入Google没有的字体

可以本地引入，使用ttf2woff得到字体文件后，放在本地目录下，然后写一个CSS文件声明字体（@font-face）

这里主要介绍CDN引入方式
首先需要一个 custom file，比如 header.njk，在其中引入相应字体资源。这具体资源怎么找就要自己想办法了，或者可以参考别人的自己做一份。

```html
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.0.0/style.css"/>
<style>
  @import 'lxgw-wenkai-lite-webfont/style.css';
</style>
```

然后在 `_config.next.yml` 文件中添加配置项

```yml
font:
  enable: true

  # 外链字体库地址，例如 //fonts.googleapis.com (默认值)
  host:

# 全局字体，应用在 body 元素上
  global:
    # false 表示不使用外链
    external: false  
    family: LXGW WenKai Lite

  # 标题字体 (h1, h2, h3, h4, h5, h6)
  headings:
    external: true
    family: 

  # 文章字体
  posts:
    external: true
    family:

  # Logo 字体
  logo:
    external: true
    family:

  # 代码字体，应用于 code 以及代码块
  codes:
    external: true
    family:
```

除了 global 之外，也可以单独配置某部分的字体，如 posts、headings、codes

### 引入音乐播放器

播放器使用APlayer（此处膜拜大佬 DIYGOD），通过CDN方式引入，配合 MetingJS 使用，可支持网易云、QQ音乐等。支持按歌单，专辑、歌手等类型获得播放列表

同理，需要一个 custom file，引入

```html
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script>
  <div
    class="aplayer"
    data-id="歌单id"
    data-server="netease"
    data-type="playlist"
    data-fixed="true"
    data-autoplay="false"
    data-order="random"
    data-volume="0.2"
    data-theme="#4C5E87"
    data-preload="auto"
    data-lrc-type="0"></div>
```

注意事项：

- 版本，MetingJS 使用1.2.x版本，高版本不支持APlayer1.10.0
- API加载失败，MetingJS内置的API目前不太稳定，可用其它的代替，添加如下配置
  
  ```html
  <script>
    var meting_api = 'https://meting.yany.ml/api?server=:server&type=:type&id=:id&auth=:auth&r=:r';
  </script>
  ```

- 实现全局播放，切换页面不刷新，在 `_config.next.yml` 中打开配置 pjax 即可

